

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ucsmsdk.utils.converttopython &mdash; ucsmsdk 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ucsmsdk 0.1.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> ucsmsdk
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ucsmsdk.html">ucsmsdk package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../history.html#id1">0.9.0.0 (2015-01-11)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">ucsmsdk</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
    <li>ucsmsdk.utils.converttopython</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for ucsmsdk.utils.converttopython</h1><div class="highlight"><pre>
<span class="c"># Copyright 2013 Cisco Systems, Inc.</span>
<span class="c">#</span>
<span class="c"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c"># you may not use this file except in compliance with the License.</span>
<span class="c"># You may obtain a copy of the License at</span>
<span class="c">#  http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c">#</span>
<span class="c"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c"># See the License for the specific language governing permissions and</span>
<span class="c"># limitations under the License.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module generated the python script using UCS GUI, GUI logs and xml</span>
<span class="sd">request.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">xml.dom</span>
<span class="kn">import</span> <span class="nn">xml.dom.minidom</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">dirname</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;ucs&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">ucsgenutils</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">ucscoreutils</span>
<span class="kn">from</span> <span class="nn">..ucsconstants</span> <span class="kn">import</span> <span class="n">Status</span><span class="p">,</span> <span class="n">NamingPropertyId</span><span class="p">,</span> <span class="n">YesOrNo</span>
<span class="kn">from</span> <span class="nn">..ucsexception</span> <span class="kn">import</span> <span class="n">UcsValidationException</span>


<span class="c"># variable declaration</span>
<span class="n">_display_xml</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">_outfile_flag</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">_outfile_path</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">_outfile</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">_and_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_or_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_not_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_multi_line_method</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&lt;configConfMo&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;lsInstantiateNNamedTemplate&quot;</span><span class="p">,</span>
                      <span class="s">&quot;&lt;statsClearInterval&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;lsClone&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;lsTemplatise&quot;</span><span class="p">,</span>
                      <span class="s">&quot;&lt;lsInstantiateTemplate&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;lsInstantiateNTemplate&quot;</span><span class="p">,</span>
                      <span class="s">&quot;&lt;configConfRename&quot;</span><span class="p">]</span>
<span class="n">_single_line_method</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&lt;/configConfMo&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/lsInstantiateNNamedTemplate&quot;</span><span class="p">,</span>
                       <span class="s">&quot;&lt;/statsClearInterval&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/lsClone&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/lsTemplatise&quot;</span><span class="p">,</span>
                       <span class="s">&quot;&lt;/lsInstantiateTemplate&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/lsInstantiateNTemplate&quot;</span><span class="p">,</span>
                       <span class="s">&quot;/&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/configConfRename&quot;</span><span class="p">]</span>


<span class="c"># class declaration</span>
<span class="k">class</span> <span class="nc">_ClassStatus</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;enum for mo status.&quot;&quot;&quot;</span>
    <span class="n">NONE_</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">CREATED</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">MODIFIED</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">REMOVED</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">DELETED</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">GET</span> <span class="o">=</span> <span class="mi">16</span>


<span class="c"># Function Definition</span>
<span class="c"># ---- START - OF - GENERIC - FUCNTION ----</span>
<span class="k">def</span> <span class="nf">_get_class_id_for_dn</span><span class="p">(</span><span class="n">dn</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to get the class id for a given dn</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">rns</span> <span class="o">=</span> <span class="n">dn</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">class_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">parent_class_id</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">for</span> <span class="n">rn</span> <span class="ow">in</span> <span class="n">rns</span><span class="p">:</span>
        <span class="n">class_id</span> <span class="o">=</span> <span class="n">_get_class_id_for_rn</span><span class="p">(</span><span class="n">rn</span><span class="p">,</span> <span class="n">parent_class_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">class_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">parent_class_id</span> <span class="o">=</span> <span class="n">class_id</span>

    <span class="k">return</span> <span class="n">class_id</span>


<span class="k">def</span> <span class="nf">_get_class_id_for_rn</span><span class="p">(</span><span class="n">rn</span><span class="p">,</span> <span class="n">prev_class_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to get the class id for a given rn</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">prev_class_id</span><span class="p">:</span>
        <span class="n">prev_class_id</span> <span class="o">=</span> <span class="s">&quot;TopRoot&quot;</span>

    <span class="n">meta_class_id</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">find_class_id_in_mo_meta_ignore_case</span><span class="p">(</span>
        <span class="n">prev_class_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">meta_class_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UcsValidationException</span><span class="p">(</span>
            <span class="s">&#39;[Error]: GetManagedObject: class_id [</span><span class="si">%s</span><span class="s">] is not valid&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">prev_class_id</span><span class="p">))</span>

    <span class="n">mo_meta</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">get_mo_property_meta</span><span class="p">(</span><span class="n">meta_class_id</span><span class="p">,</span> <span class="s">&quot;mo_meta&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">mo_meta</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UcsValidationException</span><span class="p">(</span>
            <span class="s">&#39;[Error]: GetManagedObject: mo_meta for class_id [</span><span class="si">%s</span><span class="s">] is not valid&#39;</span>
            <span class="o">%</span> <span class="n">prev_class_id</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">child_class_id</span> <span class="ow">in</span> <span class="n">mo_meta</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="c"># 1.If Rn does not contain [, then there is no naming property.</span>
        <span class="c">#   Check directly.</span>
        <span class="c"># 2. If Rn contains [,</span>
        <span class="c"># 2.1) Check if the Rn contains a &quot;-&quot; and ChildClassId.Rn does not,</span>
        <span class="c">#      then proceed to next child_class_id.</span>
        <span class="c">#      substitute \[[^\]]*\] with .* and do a regex match</span>
        <span class="c"># 2.2) If Rn does not contain a &quot;-&quot;,</span>
        <span class="c">#      then probably the child_class_id has only the naming property</span>
        <span class="c">#      without any suffix or prefix. Check for &quot;[*]&quot;.</span>
        <span class="c">#      Need to see, if there is a possibility of more than one [*]</span>
        <span class="c">#      directly under a ClassId</span>

        <span class="c"># child_class_id = &quot;orgorg&quot;</span>
        <span class="n">child_class_id</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">find_class_id_in_mo_meta_ignore_case</span><span class="p">(</span>
            <span class="n">child_class_id</span><span class="p">)</span>
        <span class="n">child_mo_meta</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">get_mo_property_meta</span><span class="p">(</span><span class="n">child_class_id</span><span class="p">,</span>
                                                          <span class="s">&quot;mo_meta&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">child_mo_meta</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c"># 2. Check if there is a naming property</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;(\[[^\]]+\])&quot;</span><span class="p">,</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">rn</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">rn</span> <span class="o">==</span> <span class="n">rn</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">name</span>
            <span class="k">continue</span>

        <span class="c"># 2.1 Check if it has a prefix or suffix</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;(([^\]]\[)|(\][^\[]))&quot;</span><span class="p">,</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">rn</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">mod_meta_rn</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;\[([^\]]+)\]&quot;</span><span class="p">,</span> <span class="s">r&quot;(?P&lt;\1&gt;.*?)&quot;</span><span class="p">,</span>
                                 <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">rn</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\|&quot;</span><span class="p">,</span> <span class="n">mod_meta_rn</span><span class="p">):</span>
                <span class="n">mod_meta_rn</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;\|&quot;</span><span class="p">,</span> <span class="s">r&quot;\|&quot;</span><span class="p">,</span> <span class="n">mod_meta_rn</span><span class="p">)</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="s">&quot;^&quot;</span> <span class="o">+</span> <span class="n">mod_meta_rn</span> <span class="o">+</span> <span class="s">&quot;$&quot;</span>
            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">rn</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>

    <span class="k">for</span> <span class="n">child_class_id</span> <span class="ow">in</span> <span class="n">mo_meta</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">child_mo_meta</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">get_mo_property_meta</span><span class="p">(</span><span class="n">child_class_id</span><span class="p">,</span>
                                                          <span class="s">&quot;mo_meta&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">child_mo_meta</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;^(\[[^\]]+\])+$&quot;</span><span class="p">,</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">rn</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">child_mo_meta</span><span class="o">.</span><span class="n">name</span>

    <span class="k">return</span> <span class="bp">None</span>


<span class="k">def</span> <span class="nf">_get_prop_name</span><span class="p">(</span><span class="n">prop</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to modify property name as python convention</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">new_prop</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;_+&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span>
                      <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;^_&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                             <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;[/\-: +]&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span>
                                    <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;([a-z0-9])([A-Z])&#39;</span><span class="p">,</span>
                                           <span class="s">r&#39;\g&lt;1&gt;_\g&lt;2&gt;&#39;</span><span class="p">,</span> <span class="n">prop</span><span class="p">))))</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">new_prop</span>


<span class="k">def</span> <span class="nf">_first_capital</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to make first letter capital</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">string</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">string</span>


<span class="k">def</span> <span class="nf">_is_root_node</span><span class="p">(</span><span class="n">dom</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to check if it root xml node</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">root_node_tag_name</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">tag_name</span>
    <span class="k">if</span> <span class="n">root_node_tag_name</span> <span class="o">==</span> <span class="n">tag_name</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">_get_pair_nodes</span><span class="p">(</span><span class="n">root_node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to get &quot;pair&quot; nodes under root_node</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">method_elem</span> <span class="o">=</span> <span class="n">root_node</span>
    <span class="n">in_configs_elem_list</span> <span class="o">=</span> <span class="n">method_elem</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inConfigs&quot;</span><span class="p">)</span>
    <span class="n">in_configs_elem</span> <span class="o">=</span> <span class="n">in_configs_elem_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">pair_elems_list</span> <span class="o">=</span> <span class="n">in_configs_elem</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;pair&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pair_elems_list</span>


<span class="k">def</span> <span class="nf">_get_only_elem_child_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to return only first element child node</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">child_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">child_node</span> <span class="k">for</span> <span class="n">child_node</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">childNodes</span>
                  <span class="k">if</span> <span class="n">child_node</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">child_node</span><span class="o">.</span><span class="n">ELEMENT_NODE</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">child_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_get_elem_child_nodes</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to return all element child nodes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">child_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">child_node</span> <span class="k">for</span> <span class="n">child_node</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">childNodes</span> <span class="k">if</span>
                  <span class="n">child_node</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">child_node</span><span class="o">.</span><span class="n">ELEMENT_NODE</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">child_list</span>


<span class="k">def</span> <span class="nf">_dump_xml_on_screen</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to display xml extracted to generate sdk code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">global</span> <span class="n">_outfile_path</span><span class="p">,</span> <span class="n">_outfile_flag</span>
    <span class="n">xml_new</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="s">&quot; &quot;</span><span class="p">)</span>
    <span class="n">xml_new</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;^.*?xml version.*\n&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">xml_new</span><span class="p">)</span>
    <span class="n">xml_new</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;\n[\s]*\n&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">xml_new</span><span class="p">)</span>
    <span class="n">multiline_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;^(.*)&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
    <span class="n">xml_new</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">multiline_pattern</span><span class="p">,</span> <span class="s">r&quot;#\1&quot;</span><span class="p">,</span> <span class="n">xml_new</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_outfile_flag</span><span class="p">:</span>
        <span class="n">_outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">_outfile_path</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">##### Start-Of-XML #####</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xml_new</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">##### End-Of-XML #####&quot;</span>
        <span class="n">_outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">##### Start-Of-XML #####</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">print</span> <span class="n">xml_new</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">##### End-Of-XML #####</span><span class="se">\n</span><span class="s">&quot;</span>


<span class="k">def</span> <span class="nf">_check_if_any_list_value_in_string</span><span class="p">(</span><span class="n">listx</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to test if any of the list value present in a line.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">listx</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">flag</span>


<span class="k">def</span> <span class="nf">_create_property_map_from_node</span><span class="p">(</span><span class="n">class_node</span><span class="p">,</span> <span class="n">class_status</span><span class="p">):</span>
    <span class="n">gmo_flag</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">property_map</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">find_class_id_in_mo_meta_ignore_case</span><span class="p">(</span>
            <span class="n">class_node</span><span class="o">.</span><span class="n">localName</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">gmo_flag</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">gmo_flag</span><span class="p">:</span>
        <span class="n">peer_class_id</span> <span class="o">=</span> <span class="n">_first_capital</span><span class="p">(</span><span class="n">class_node</span><span class="o">.</span><span class="n">localName</span><span class="p">)</span>
        <span class="n">peer_class_ref</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">load_class</span><span class="p">(</span><span class="n">peer_class_id</span><span class="p">)</span>
        <span class="n">peer_class_naming_props</span> <span class="o">=</span> <span class="n">peer_class_ref</span><span class="o">.</span><span class="n">naming_props</span>
        <span class="n">peer_class_prop_map</span> <span class="o">=</span> <span class="n">peer_class_ref</span><span class="o">.</span><span class="n">prop_map</span>
        <span class="n">peer_class_prop_meta</span> <span class="o">=</span> <span class="n">peer_class_ref</span><span class="o">.</span><span class="n">prop_meta</span>
        <span class="n">peer_class_mo_meta</span> <span class="o">=</span> <span class="n">peer_class_ref</span><span class="o">.</span><span class="n">mo_meta</span>

    <span class="c"># create property map for attributes</span>
    <span class="n">attributes_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">class_node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="k">if</span> <span class="s">&quot;dn&quot;</span> <span class="ow">in</span> <span class="n">attributes_dict</span><span class="p">:</span>
        <span class="n">prop_dn</span> <span class="o">=</span> <span class="n">attributes_dict</span><span class="p">[</span><span class="s">&quot;dn&quot;</span><span class="p">]</span>
        <span class="n">prop_rn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">prop_dn</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s">&quot;rn&quot;</span> <span class="ow">in</span> <span class="n">attributes_dict</span><span class="p">:</span>
        <span class="n">prop_rn</span> <span class="o">=</span> <span class="n">attributes_dict</span><span class="p">[</span><span class="s">&quot;rn&quot;</span><span class="p">]</span>

    <span class="n">naming_props_py_from_rn</span> <span class="o">=</span> <span class="n">ucscoreutils</span><span class="o">.</span><span class="n">get_naming_props</span><span class="p">(</span><span class="n">prop_rn</span><span class="p">,</span>
                                                        <span class="n">peer_class_mo_meta</span><span class="o">.</span><span class="n">rn</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">class_node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">attr</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">val</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;dn&#39;</span><span class="p">,</span> <span class="s">&#39;rn&#39;</span><span class="p">,</span> <span class="s">&#39;status&#39;</span><span class="p">]:</span>
            <span class="k">continue</span>

        <span class="c"># prop_ucs : ucs naming convention</span>
        <span class="c"># prop_py  : python naming convention</span>
        <span class="c"># if name.lower() == &quot;Filter&quot;.lower():</span>
        <span class="c">#     prop_ucs = &quot;FilterValue&quot;</span>
        <span class="c"># else:</span>
        <span class="c">#     prop_ucs = name</span>
        <span class="n">prop_ucs</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">gmo_flag</span> <span class="ow">and</span> <span class="n">prop_ucs</span> <span class="ow">in</span> <span class="n">peer_class_prop_map</span><span class="p">:</span>
            <span class="n">prop_py</span> <span class="o">=</span> <span class="n">peer_class_prop_map</span><span class="p">[</span><span class="n">prop_ucs</span><span class="p">]</span>
            <span class="n">prop_meta</span> <span class="o">=</span> <span class="n">peer_class_prop_meta</span><span class="p">[</span><span class="n">prop_py</span><span class="p">]</span>
            <span class="n">prop_access</span> <span class="o">=</span> <span class="n">prop_meta</span><span class="o">.</span><span class="n">access</span>
            <span class="k">if</span> <span class="n">prop_access</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">prop_access</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span> <span class="o">!=</span> \
                        <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prop_meta</span><span class="o">.</span><span class="n">validate_property_value</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_py</span> <span class="o">=</span> <span class="n">prop_ucs</span>

        <span class="k">if</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;r&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>

        <span class="n">property_map</span><span class="p">[</span><span class="n">prop_py</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">if</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">naming_prop_ucs</span> <span class="ow">in</span> <span class="n">peer_class_naming_props</span><span class="p">:</span>
            <span class="n">naming_prop_py</span> <span class="o">=</span> <span class="n">peer_class_prop_map</span><span class="p">[</span><span class="n">naming_prop_ucs</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">naming_prop_py</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">property_map</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">naming_props_py_from_rn</span><span class="p">[</span><span class="n">naming_prop_py</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">peer_class_prop_meta</span><span class="p">[</span><span class="n">naming_prop_py</span><span class="p">]</span><span class="o">.</span> \
                        <span class="n">validate_property_value</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                    <span class="k">if</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;r&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>

                    <span class="n">property_map</span><span class="p">[</span><span class="n">naming_prop_py</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">return</span> <span class="n">property_map</span>


<span class="c"># ---- END - OF - GENERIC - FUCNTION ----</span>

<span class="c"># ---- START - OF - METHOD SPECIFIC - FUNCTION ----</span>
<span class="k">def</span> <span class="nf">_get_config_conf_cmdlet</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">is_pair_node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to process configConf request.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="n">class_node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">key</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">is_pair_node</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">KEY</span><span class="p">)</span>
        <span class="n">class_node</span> <span class="o">=</span> <span class="n">_get_only_elem_child_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">class_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
        <span class="n">class_node</span> <span class="o">=</span> <span class="n">node</span>

    <span class="n">dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">mo_tag</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span>
            <span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> \
                    <span class="bp">None</span><span class="p">:</span>
        <span class="n">mo_tag</span> <span class="o">=</span> <span class="s">&quot;mo&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
                <span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">class_node</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mo_tag</span> <span class="o">=</span> <span class="s">&quot;obj&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mo_tag</span> <span class="o">=</span> <span class="s">&quot;mo&quot;</span>

    <span class="n">import_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">obj_flag</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="n">top_cmdlet</span><span class="p">,</span> <span class="n">op_flag</span><span class="p">,</span> <span class="n">import_list</span> <span class="o">=</span> <span class="n">_form_configconf_cmdlet</span><span class="p">(</span>
        <span class="n">class_node</span><span class="o">=</span><span class="n">class_node</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">tag</span><span class="o">=</span><span class="n">mo_tag</span><span class="p">,</span>
        <span class="n">import_list</span><span class="o">=</span><span class="n">import_list</span><span class="p">)</span>
    <span class="c"># print top_cmdlet</span>

    <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">()</span> <span class="ow">and</span> \
                    <span class="nb">len</span><span class="p">(</span><span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">class_node</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">call_count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">cmdlet</span><span class="o">=</span><span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">child_node</span> <span class="ow">in</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">class_node</span><span class="p">):</span>
            <span class="n">sub_cmdlet</span><span class="p">,</span> <span class="n">import_list</span><span class="p">,</span> <span class="n">obj_flag</span> <span class="o">=</span> <span class="n">_get_config_conf_sub_cmdlet</span><span class="p">(</span>
                                                                <span class="n">child_node</span><span class="p">,</span>
                                                                <span class="n">dn</span><span class="p">,</span> <span class="n">mo_tag</span><span class="p">,</span>
                                                                <span class="n">call_count</span><span class="p">,</span>
                                                                <span class="n">import_list</span><span class="p">,</span>
                                                                <span class="n">obj_flag</span><span class="p">)</span>

            <span class="n">call_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">sub_cmdlet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">sub_cmdlet</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">call_count</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">op_flag</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;add&quot;</span><span class="p">,</span> <span class="s">&quot;addmodify&quot;</span><span class="p">,</span> <span class="s">&quot;set&quot;</span><span class="p">,</span> <span class="s">&quot;remove&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">mo_tag</span> <span class="o">==</span> <span class="s">&quot;mo&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;add&quot;</span><span class="p">:</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.add_mo(mo)</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">elif</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;addmodify&quot;</span><span class="p">:</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.add_mo(mo, True)</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">elif</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;set&quot;</span><span class="p">:</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.set_mo(mo)</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">elif</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;remove&quot;</span><span class="p">:</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;handle.remove_mo(mo)&quot;</span>

    <span class="n">import_cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">mo</span> <span class="ow">in</span> <span class="n">import_list</span><span class="p">:</span>
        <span class="n">mo_folder</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;([a-z])+&quot;</span><span class="p">,</span> <span class="n">ucsgenutils</span><span class="o">.</span><span class="n">word_l</span><span class="p">(</span><span class="n">mo</span><span class="p">))</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
        <span class="n">import_cmdlet</span> <span class="o">+=</span> <span class="s">&quot;from ucsmsdk.mometa.</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">mo_folder</span><span class="p">,</span> <span class="n">mo</span><span class="p">,</span> <span class="n">mo</span><span class="p">)</span>

    <span class="n">main_cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">import_cmdlet</span><span class="p">:</span>
        <span class="n">main_cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">import_cmdlet</span>
    <span class="k">if</span> <span class="n">mo_tag</span> <span class="o">==</span> <span class="s">&quot;obj&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">obj_flag</span><span class="p">:</span>
        <span class="n">top_cmdlet</span><span class="o">=</span><span class="s">&quot;&quot;</span>

    <span class="n">main_cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">top_cmdlet</span>
    <span class="n">main_cmdlet</span> <span class="o">+=</span> <span class="n">cmdlet</span>

    <span class="k">return</span> <span class="n">main_cmdlet</span>


<span class="k">def</span> <span class="nf">_get_config_conf_sub_cmdlet</span><span class="p">(</span><span class="n">class_node</span><span class="p">,</span> <span class="n">parent_dn</span><span class="p">,</span> <span class="n">parent_mo_tag</span><span class="p">,</span>
                                <span class="n">parent_call_count</span><span class="p">,</span> <span class="n">import_list</span><span class="p">,</span> <span class="n">obj_flag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to process configConf request.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="c"># use_parent_mo = False ##if the parent mo should be used at this level</span>

    <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">RN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">parent_dn</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">RN</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">parent_mo_tag</span> <span class="o">==</span> <span class="s">&quot;obj&quot;</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="s">&quot;mo&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">parent_mo_tag</span> <span class="o">+</span> <span class="s">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">parent_call_count</span><span class="p">)</span>

    <span class="n">cmdlet</span><span class="p">,</span> <span class="n">op_flag</span><span class="p">,</span> <span class="n">import_list</span> <span class="o">=</span> <span class="n">_form_configconf_cmdlet</span><span class="p">(</span>
        <span class="n">class_node</span><span class="o">=</span><span class="n">class_node</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">dn</span><span class="p">,</span>
        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
        <span class="n">import_list</span><span class="o">=</span><span class="n">import_list</span><span class="p">,</span>
        <span class="n">parent_tag</span><span class="o">=</span><span class="n">parent_mo_tag</span><span class="p">,</span>
        <span class="n">sub_cmdlet</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c"># Recursively cater to subnodes</span>
    <span class="k">for</span> <span class="n">child_node</span> <span class="ow">in</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">class_node</span><span class="p">):</span>
        <span class="n">sub_cmdlet</span><span class="p">,</span> <span class="n">import_list</span><span class="p">,</span> <span class="n">obj_flag</span> <span class="o">=</span> <span class="n">_get_config_conf_sub_cmdlet</span><span class="p">(</span>
                                                                  <span class="n">child_node</span><span class="p">,</span>
                                                                  <span class="n">dn</span><span class="p">,</span>
                                                                  <span class="n">tag</span><span class="p">,</span>
                                                                  <span class="n">count</span><span class="p">,</span>
                                                                  <span class="n">import_list</span><span class="p">,</span>
                                                                  <span class="n">obj_flag</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">sub_cmdlet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">sub_cmdlet</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="c"># if op_flag in [&quot;add&quot;, &quot;addmodify&quot;, &quot;set&quot;, &quot;remove&quot;] and tag == &quot;mo&quot;:</span>
    <span class="k">if</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;add&quot;</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">==</span> <span class="s">&quot;mo&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.add_mo(mo)</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">if</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;addmodify&quot;</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">==</span> <span class="s">&quot;mo&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.add_mo(mo, True)</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">if</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;set&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;handle.set_mo(mo)</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">if</span> <span class="n">op_flag</span> <span class="o">==</span> <span class="s">&quot;remove&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;handle.remove_mo(</span><span class="si">%s</span><span class="s">)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">tag</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">obj_flag</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent_mo_tag</span> <span class="o">==</span> <span class="s">&quot;obj&quot;</span> <span class="ow">and</span> <span class="n">op_flag</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;add&quot;</span><span class="p">,</span> <span class="s">&quot;addmodify&quot;</span><span class="p">,</span> <span class="s">&quot;set&quot;</span><span class="p">]:</span>
            <span class="n">obj_flag</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">return</span> <span class="n">cmdlet</span><span class="p">,</span> <span class="n">import_list</span><span class="p">,</span> <span class="n">obj_flag</span>


<span class="k">def</span> <span class="nf">_form_configconf_cmdlet</span><span class="p">(</span><span class="n">class_node</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">import_list</span><span class="p">,</span> <span class="n">parent_tag</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">sub_cmdlet</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to process configConf request.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">class_status</span> <span class="o">=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">NONE_</span>
    <span class="n">op_flag</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">parent_dn</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="n">peer_class_id</span> <span class="o">=</span> <span class="n">_first_capital</span><span class="p">(</span><span class="n">class_node</span><span class="o">.</span><span class="n">localName</span><span class="p">)</span>

    <span class="n">parent_class_id</span> <span class="o">=</span> <span class="n">_get_class_id_for_dn</span><span class="p">(</span><span class="n">parent_dn</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parent_class_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">parent_class_id</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span>
            <span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> \
                    <span class="bp">None</span><span class="p">:</span>
        <span class="n">cs_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cs_list</span> <span class="o">=</span> <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">cs_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cs_list</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Status</span><span class="o">.</span><span class="n">CREATED</span> <span class="ow">in</span> <span class="n">cs_list</span><span class="p">:</span>
            <span class="n">class_status</span> <span class="o">|=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span>
        <span class="k">if</span> <span class="n">Status</span><span class="o">.</span><span class="n">MODIFIED</span> <span class="ow">in</span> <span class="n">cs_list</span><span class="p">:</span>
            <span class="n">class_status</span> <span class="o">|=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span>
        <span class="k">if</span> <span class="n">Status</span><span class="o">.</span><span class="n">DELETED</span> <span class="ow">in</span> <span class="n">cs_list</span><span class="p">:</span>
            <span class="n">class_status</span> <span class="o">|=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">DELETED</span>
        <span class="k">if</span> <span class="n">Status</span><span class="o">.</span><span class="n">REMOVED</span> <span class="ow">in</span> <span class="n">cs_list</span><span class="p">:</span>
            <span class="n">class_status</span> <span class="o">|=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">REMOVED</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sub_cmdlet</span><span class="p">:</span>
            <span class="n">class_status</span> <span class="o">=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span> <span class="o">|</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">class_node</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">()</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">class_node</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">class_status</span> <span class="o">=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">GET</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">class_status</span> <span class="o">=</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span> <span class="o">|</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span>

    <span class="n">property_map</span> <span class="o">=</span> <span class="n">_create_property_map_from_node</span><span class="p">(</span><span class="n">class_node</span><span class="p">,</span> <span class="n">class_status</span><span class="p">)</span>

    <span class="n">parent_mo_or_dn</span> <span class="o">=</span> <span class="s">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">parent_dn</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="k">if</span> <span class="n">sub_cmdlet</span><span class="p">:</span>
        <span class="n">parent_mo_or_dn</span> <span class="o">=</span> <span class="n">parent_tag</span>

    <span class="c"># make cmdlet</span>
    <span class="k">if</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">GET</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">GET</span><span class="p">:</span>
        <span class="n">op_flag</span> <span class="o">=</span> <span class="s">&quot;get&quot;</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> = handle.query_dn(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">DELETED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">DELETED</span> <span class="ow">or</span> \
                            <span class="n">class_status</span> <span class="o">&amp;</span> \
                            <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">REMOVED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">REMOVED</span><span class="p">:</span>
        <span class="n">op_flag</span> <span class="o">=</span> <span class="s">&quot;remove&quot;</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> = handle.query_dn(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">:</span>
        <span class="n">op_flag</span> <span class="o">=</span> <span class="s">&quot;add&quot;</span>
        <span class="k">if</span> <span class="n">peer_class_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">import_list</span><span class="p">:</span>
            <span class="n">import_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">peer_class_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span><span class="p">:</span>
            <span class="n">op_flag</span> <span class="o">=</span> <span class="s">&quot;addmodify&quot;</span>
            <span class="n">add_prop_map</span> <span class="o">=</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">property_map</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
            <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">(parent_mo_or_dn=</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">tag</span><span class="p">,</span> <span class="n">peer_class_id</span><span class="p">,</span> <span class="n">parent_mo_or_dn</span><span class="p">,</span> <span class="n">add_prop_map</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">add_prop_map</span> <span class="o">=</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">property_map</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
            <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">(parent_mo_or_dn=</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">tag</span><span class="p">,</span> <span class="n">peer_class_id</span><span class="p">,</span> <span class="n">parent_mo_or_dn</span><span class="p">,</span> <span class="n">add_prop_map</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">class_status</span> <span class="o">&amp;</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span> <span class="o">==</span> <span class="n">_ClassStatus</span><span class="o">.</span><span class="n">MODIFIED</span><span class="p">:</span>
        <span class="n">op_flag</span> <span class="o">=</span> <span class="s">&quot;set&quot;</span>
        <span class="n">set_prop_map</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="n">tag</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="n">k</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">property_map</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> = handle.query_dn(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">tag</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">set_prop_map</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Throw Exception XML request status (</span><span class="si">%s</span><span class="s">) is invalid.&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">class_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">STATUS</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">cmdlet</span><span class="p">,</span> <span class="n">op_flag</span><span class="p">,</span> <span class="n">import_list</span>


<span class="k">def</span> <span class="nf">_generate_config_conf_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for configConfMo</span>
<span class="sd">    and configConfMos methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>

    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">top_node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inConfigs&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pair_nodes</span> <span class="o">=</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span>
            <span class="n">top_node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inConfigs&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pair_nodes</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">if</span> <span class="n">pair_nodes</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">pair_nodes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inConfig&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">_get_only_elem_child_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_get_config_conf_cmdlet</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">pair_nodes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">temp_cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">temp_dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">temp_mo</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">dict_mos</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># cmdlet = &quot;handle.start_ucs_transaction()&quot; + &quot;\n&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">pair_nodes</span><span class="p">:</span>
            <span class="n">temp_dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">KEY</span><span class="p">)</span>
            <span class="n">temp_mo</span> <span class="o">=</span> <span class="s">&quot;mo&quot;</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">temp_mo</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">temp_dn</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dict_mos</span><span class="p">:</span>
                <span class="n">dict_mos</span><span class="p">[</span><span class="n">temp_dn</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_mo</span>

            <span class="c"># check if parent is already there in dictionary</span>
            <span class="n">child_dn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">temp_dn</span><span class="p">)</span>
            <span class="n">parent_dn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">temp_dn</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parent_dn</span> <span class="ow">in</span> <span class="n">dict_mos</span><span class="p">:</span>
                <span class="n">node</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">KEY</span><span class="p">,</span> <span class="n">child_dn</span><span class="p">)</span>
                <span class="n">temp_cmdlet</span> <span class="o">=</span> <span class="n">_get_config_conf_cmdlet</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">temp_mo</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">dict_mos</span><span class="p">[</span>
                    <span class="n">parent_dn</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; | &quot;</span> <span class="o">+</span> <span class="n">temp_cmdlet</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp_cmdlet</span> <span class="o">=</span> <span class="n">_get_config_conf_cmdlet</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">temp_cmdlet</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>

            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c"># cmdlet += &quot;handle.complete_ucs_transaction()&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_get_config_conf_cmdlet</span><span class="p">(</span><span class="n">pair_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">True</span><span class="p">)</span>

    <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">handle.commit()&quot;</span>

    <span class="k">if</span> <span class="n">cmdlet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_config_resolve_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    configResolveDn, configResolveDns, configResolveClass and</span>
<span class="sd">    configResolveClasses methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_is_root_node</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c"># &lt;configResolveDn&gt;</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s">&quot;configResolveDn&quot;</span><span class="p">:</span>
        <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">):</span>
            <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;handle.config_resolve_dn(&quot;</span><span class="si">%s</span><span class="s">&quot;, &quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">dn</span><span class="p">,</span> <span class="n">in_hierarchical_value</span><span class="p">)</span>
    <span class="c"># &lt;configResolveDns&gt;</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s">&quot;configResolveDns&quot;</span><span class="p">:</span>
        <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">):</span>
            <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>

        <span class="n">dn_nodes</span> <span class="o">=</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span>
            <span class="n">top_node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inDns&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">dn_nodes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;dn_set = DnSet()&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">temp_dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">dn_nodes</span><span class="p">:</span>
            <span class="n">temp_dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">VALUE</span><span class="p">)</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;dn = Dn()</span><span class="se">\n</span><span class="s">dn.attr_set(</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">,&quot;</span> \
                      <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="s">dn_set.child_add(dn)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">temp_dn</span>

        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;handle.config_resolve_dns(dn_set, &quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> \
                  <span class="n">in_hierarchical_value</span>
    <span class="c"># &lt;configResolveClass&gt;</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s">&quot;configResolveClass&quot;</span><span class="p">:</span>
        <span class="n">_and_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_or_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_not_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">filter_node</span> <span class="o">=</span> <span class="n">_get_only_elem_child_node</span><span class="p">(</span><span class="n">top_node</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">filter_node</span>
        <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">filter_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>

        <span class="n">class_id</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;class_id&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">class_id</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;class_id&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;in_filter = FilterFilter()</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">_create_python_filter_code</span><span class="p">(</span>
            <span class="n">filter_node</span><span class="p">,</span>
            <span class="s">&quot;inFilter&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;handle.config_resolve_class(&#39;</span> \
                          <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_filter, &quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">class_id</span><span class="p">,</span>
                                                      <span class="n">in_hierarchical_value</span><span class="p">)</span>
    <span class="c"># &lt;configResolveClasses&gt;</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s">&quot;configResolveClasses&quot;</span><span class="p">:</span>
        <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">top_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>

        <span class="n">class_id_nodes</span> <span class="o">=</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span>
            <span class="n">top_node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inIds&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsbasetype import ClassIdSet, ClassId</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;id_set = ClassIdSet()&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">temp_class_id</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">class_id_nodes</span><span class="p">:</span>
            <span class="n">temp_class_id</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">VALUE</span><span class="p">)</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;class_id = ClassId()</span><span class="se">\n</span><span class="s">class_id.attr_set(</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">,&quot;</span> \
                      <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="s">idSet.child_add(class_id)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">temp_class_id</span>

        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;handle.config_resolve_classes(id_set, &quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> \
                  <span class="n">in_hierarchical_value</span>

    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_create_python_filter_code</span><span class="p">(</span><span class="n">parent_node</span><span class="p">,</span> <span class="n">parent_filter_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to provide filter support.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">temp_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">parent_node</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;and&quot;</span><span class="p">:</span>
            <span class="n">temp_name</span> <span class="o">=</span> <span class="s">&quot;andFilter&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_and_count</span><span class="p">)</span>
            <span class="n">_and_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">temp_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot; = AndFilter()</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">_create_python_filter_code</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">temp_name</span><span class="p">)</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">parent_filter_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;.child_add(&quot;</span> <span class="o">+</span> <span class="n">temp_name</span> <span class="o">+</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;or&quot;</span><span class="p">:</span>
            <span class="n">temp_name</span> <span class="o">=</span> <span class="s">&quot;orFilter&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_or_count</span><span class="p">)</span>
            <span class="n">_or_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">temp_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot; = OrFilter()</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">_create_python_filter_code</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">temp_name</span><span class="p">)</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">parent_filter_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;.child_add(&quot;</span> <span class="o">+</span> <span class="n">temp_name</span> <span class="o">+</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;not&quot;</span><span class="p">:</span>
            <span class="n">temp_name</span> <span class="o">=</span> <span class="s">&quot;notFilter&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_not_count</span><span class="p">)</span>
            <span class="n">_not_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">temp_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot; = NotFilter()</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">_create_python_filter_code</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">temp_name</span><span class="p">)</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">parent_filter_name</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;.child_add(&quot;</span> <span class="o">+</span> <span class="n">temp_name</span> <span class="o">+</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;eq&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;eqFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;ne&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;neFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;gt&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;gtFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lt&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;ltFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;le&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;leFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;wcard&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;wcardFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;anybit&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;anybitFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;allbits&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;allbitsFilter&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;bw&quot;</span><span class="p">:</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="s">&quot;bwFilter&quot;</span>

        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">filter_name</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">_first_capital</span><span class="p">(</span><span class="n">filter_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;()</span><span class="se">\n</span><span class="s">&quot;</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> = </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">filter_name</span><span class="p">,</span> <span class="n">_first_capital</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="n">parent_filter_name</span> <span class="o">+</span> <span class="s">&quot;.child_add(&quot;</span> <span class="o">+</span> <span class="n">filter_name</span> <span class="o">+</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>

    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_single_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="n">is_template</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    lsClone and lsInstantiateTemplate methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">is_template</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateTemplate&quot;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lsClone&quot;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>

    <span class="n">dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; not available&quot;</span>  <span class="c"># writewarning in dotnet</span>
        <span class="k">return</span>

    <span class="n">sp_new_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inServerName&quot;</span><span class="p">):</span>
        <span class="n">sp_new_name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inServerName&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;inServerName&#39; not available&quot;</span>
        <span class="k">return</span>

    <span class="n">dest_org</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">):</span>
        <span class="n">dest_org</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">)</span>

    <span class="n">match_object</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
        <span class="s">r&quot;^(org-[\-\.:_a-zA-Z0-9]{1,16}/)*org-[\-\.:_a-zA-Z0-9]{1,16}&quot;</span><span class="p">,</span> <span class="n">dn</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c"># source_org = match_object.group(0)</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; is corrupt&quot;</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

    <span class="n">in_error_on_existing</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inErrorOnExisting&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">in_error_on_existing</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inErrorOnExisting&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_template</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory &#39;</span> \
                 <span class="s">&#39;import ls_instantiate_template</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_instantiate_template(cookie=&#39;</span> \
                  <span class="s">&#39;handle.cookie, dn=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_error_on_existing=&#39;</span> \
                  <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_server_name=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_target_org=&#39;</span> \
                  <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_hierarchical=&quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span>
                                                 <span class="n">in_error_on_existing</span><span class="p">,</span>
                                                 <span class="n">sp_new_name</span><span class="p">,</span>
                                                 <span class="n">dest_org</span><span class="p">,</span>
                                                 <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import ls_clone</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_clone(cookie=handle.cookie, dn=&#39;</span> \
                  <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_server_name=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_target_org=&#39;</span> \
                  <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_hierarchical=&quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span>
                                                 <span class="n">sp_new_name</span><span class="p">,</span>
                                                 <span class="n">dest_org</span><span class="p">,</span>
                                                 <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>

    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_ls_templatise_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    lsTemplatise method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lsTemplatise&quot;</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Check if Method is &lt;lsTemplatise&gt;&quot;</span>
        <span class="k">return</span>

    <span class="n">dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; not available&quot;</span>  <span class="c"># writewarning in dotnet</span>
        <span class="k">return</span>

    <span class="n">sp_new_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inTemplateName&quot;</span><span class="p">):</span>
        <span class="n">sp_new_name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inTemplateName&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;inTemplateName&#39; not available&quot;</span>
        <span class="k">return</span>

    <span class="n">template_type</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inTemplateType&quot;</span><span class="p">):</span>
        <span class="n">template_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inTemplateType&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;inTemplateType&#39; not available&quot;</span>
        <span class="k">return</span>

    <span class="n">dest_org</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">):</span>
        <span class="n">dest_org</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">)</span>

    <span class="n">match_object</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
        <span class="s">r&quot;^(org-[\-\.:_a-zA-Z0-9]{1,16}/)*org-[\-\.:_a-zA-Z0-9]{1,16}&quot;</span><span class="p">,</span> <span class="n">dn</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c"># source_org = match_object.group(0)</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; is corrupt&quot;</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

    <span class="k">if</span> <span class="n">dest_org</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import ls_templatise</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_templatise(cookie=handle.cookie,&#39;</span> \
                  <span class="s">&#39;dn=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_target_org=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_template_name=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
                  <span class="s">&#39;in_template_type=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_hierarchical=&quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span>
                                                      <span class="n">dest_org</span><span class="p">,</span>
                                                      <span class="n">sp_new_name</span><span class="p">,</span>
                                                      <span class="n">template_type</span><span class="p">,</span>
                                                      <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import ls_templatise</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_templatise(cookie=handle.cookie,&#39;</span> \
                  <span class="s">&#39;dn=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_target_org=&quot;org-root&quot;, &#39;</span> \
                  <span class="s">&#39;in_template_name=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
                  <span class="s">&#39;in_template_type=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
                  <span class="s">&#39;in_hierarchical=</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span>
                                           <span class="n">sp_new_name</span><span class="p">,</span>
                                           <span class="n">template_type</span><span class="p">,</span>
                                           <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>

    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_multiple_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="n">is_prefix_based</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    lsInstantiateNTemplate and  lsInstantiateNNamedTemplate methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">is_prefix_based</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateNTemplate&quot;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateNNamedTemplate&quot;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>

    <span class="n">dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">DN</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; not available&quot;</span>  <span class="c"># writewarning in dotnet</span>
        <span class="k">return</span>

    <span class="n">dest_org</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">):</span>
        <span class="n">dest_org</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inTargetOrg&quot;</span><span class="p">)</span>

    <span class="n">sp_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="s">r&quot;^(org-[\-\.:_a-zA-Z0-9]{1,16}/)*org-[\-\.:_a-zA-Z0-9]{1,16}/ls-&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="n">dn</span><span class="p">)</span>

    <span class="c"># source_org = &quot;&quot;</span>
    <span class="n">match_object</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
        <span class="s">r&quot;^(org-[\-\.:_a-zA-Z0-9]{1,16}/)*org-[\-\.:_a-zA-Z0-9]{1,16}&quot;</span><span class="p">,</span> <span class="n">dn</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c"># source_org = match_object.group(0)</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Attribute &#39;Dn&#39; is corrupt&quot;</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;in_hierarchical&quot;</span><span class="p">)</span>

    <span class="n">in_error_on_existing</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inErrorOnExisting&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">in_error_on_existing</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inErrorOnExisting&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_prefix_based</span><span class="p">:</span>
        <span class="c"># prefix = &quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inServerNamePrefixOrEmpty&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># prefix = node.getAttribute(&quot;inServerNamePrefixOrEmpty&quot;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Attribute &#39;inServerNamePrefixOrEmpty&#39; not available&quot;</span>
            <span class="k">return</span>

        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;inNumberOf&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;inNumberOf&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Attribute &#39;inNumberOf&#39; not available&quot;</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import &#39;</span> \
                 <span class="s">&#39;ls_instantiate_n_template</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_instantiate_n_template(&#39;</span> \
                  <span class="s">&#39;cookie=handle.cookie, dn=\</span><span class="si">%s</span><span class="s">&quot;, in_number_of=</span><span class="si">%s</span><span class="s">, &#39;</span> \
                  <span class="s">&#39;in_server_name_prefix_or_empty=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_target_org=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
                  <span class="s">&#39;in_hierarchical=</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">sp_name</span><span class="p">,</span> <span class="n">dest_org</span><span class="p">,</span>
                                           <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dn_nodes</span> <span class="o">=</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span>
            <span class="n">node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inNameSet&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">dn_nodes</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">dn_nodes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Xml is corrupt. New names not available&quot;</span>
            <span class="k">return</span>

        <span class="n">new_names</span> <span class="o">=</span> <span class="s">&quot;@(&quot;</span>
        <span class="n">new_name_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">temp_dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import &#39;</span> \
                 <span class="s">&#39;ls_instantiate_n_named_template</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;from ucsmsdk.ucsbasetype import DnSet, Dn</span><span class="se">\n\n</span><span class="s">&#39;</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;dn_set = DnSet()&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>

        <span class="k">for</span> <span class="n">dn_node</span> <span class="ow">in</span> <span class="n">dn_nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dn_node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">):</span>
                <span class="n">new_name_exists</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">temp_dn</span> <span class="o">=</span> <span class="n">dn_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
                <span class="n">new_names</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">temp_dn</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">,&quot;</span>
                <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;dn = Dn()</span><span class="se">\n</span><span class="s">dn.attr_set(</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">,&quot;</span> \
                          <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="s">dn_set.child_add(dn)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">temp_dn</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Xml is corrupt. New names not available&quot;</span>
                <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_name_exists</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Xml is corrupt. New names not available&quot;</span>
            <span class="k">return</span>

        <span class="n">new_names</span> <span class="o">=</span> <span class="n">new_names</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">new_names</span> <span class="o">+=</span> <span class="s">&quot;)&quot;</span>

        <span class="k">if</span> <span class="n">in_hierarchical</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">TRUE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_hierarchical_value</span> <span class="o">=</span> <span class="n">YesOrNo</span><span class="o">.</span><span class="n">FALSE</span>

        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = ls_instantiate_n_named_template(&#39;</span> \
                  <span class="s">&#39;cookie=handle.cookie, dn=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_error_on_existing=&#39;</span> \
                  <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, in_name_set=dn_set, in_target_org&#39;</span> \
                  <span class="s">&#39;=&quot;</span><span class="si">%s</span><span class="s">&quot;, in_hierarchical=&quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span>
                                                    <span class="n">in_error_on_existing</span><span class="p">,</span>
                                                    <span class="n">dest_org</span><span class="p">,</span>
                                                    <span class="n">in_hierarchical_value</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_clear_interval_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    statsClearInterval method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;statsClearInterval&quot;</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Check if Method is &lt;statsClearInterval&gt;&quot;</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">dn_nodes</span> <span class="o">=</span> <span class="n">_get_elem_child_nodes</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;inDns&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">dn_nodes</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">dn_nodes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;dn_set = DnSet()&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="n">temp_dn</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">for</span> <span class="n">dn_node</span> <span class="ow">in</span> <span class="n">dn_nodes</span><span class="p">:</span>
        <span class="n">temp_dn</span> <span class="o">=</span> <span class="n">dn_node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">NamingPropertyId</span><span class="o">.</span><span class="n">VALUE</span><span class="p">)</span>
        <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;dn = Dn()</span><span class="se">\n</span><span class="s">dn.attr_set(</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">, &quot;</span> \
                  <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)</span><span class="se">\n</span><span class="s">dn_set.child_add(dn)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">temp_dn</span>
    <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&quot;handle.config_resolve_dns(dn_set)&quot;</span>

    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="k">def</span> <span class="nf">_generate_config_conf_rename_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and generate script for</span>
<span class="sd">    configConfRename method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">top_node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="k">if</span> <span class="n">top_node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">top_node</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;configConfRename&quot;</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">top_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Check if Method is &lt;configConfRename&gt;&quot;</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&#39;dn&#39;</span><span class="p">):</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&#39;dn&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&#39;inNewName&#39;</span><span class="p">):</span>
        <span class="n">in_new_name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&#39;inNewName&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&#39;inHierarchical&#39;</span><span class="p">):</span>
        <span class="n">in_hierarchical</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&#39;inHierarchical&#39;</span><span class="p">)</span>
    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">from ucsmsdk.ucsmethodfactory import config_conf_rename</span><span class="se">\n\n</span><span class="s">&quot;</span>
    <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;elem = config_conf_rename(&#39;</span> \
              <span class="s">&#39;cookie=handle.cookie, dn=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
              <span class="s">&#39;in_new_name=&quot;</span><span class="si">%s</span><span class="s">&quot;, &#39;</span> \
              <span class="s">&#39;in_hierarchical=&quot;</span><span class="si">%s</span><span class="s">&quot;)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dn</span><span class="p">,</span> <span class="n">in_new_name</span><span class="p">,</span> <span class="n">in_hierarchical</span><span class="p">)</span>
    <span class="n">cmdlet</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">mo_list = handle.process_xml_elem(elem)</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">return</span> <span class="n">cmdlet</span>


<span class="c"># ---- END - OF - METHOD SPECIFIC - FUNCTION ----</span>

<span class="k">def</span> <span class="nf">_generate_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which takes xmlstring, and identify which method to call</span>
<span class="sd">    for a specific method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>

    <span class="n">cmdlet</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_display_xml</span><span class="p">,</span> <span class="n">_outfile_path</span>
    <span class="k">if</span> <span class="n">_display_xml</span><span class="p">:</span>
        <span class="c"># doc = xml.dom.minidom.parseString(xml_string)</span>
        <span class="n">_dump_xml_on_screen</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="n">category</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">match_found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;^[\s]*&lt;[\s]*([\S]+)&quot;</span><span class="p">,</span> <span class="n">xml_string</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match_found</span><span class="p">:</span>
        <span class="n">method_name</span> <span class="o">=</span> <span class="n">match_found</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">category</span> <span class="o">=</span> <span class="n">method_name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;configConfMos&quot;</span> <span class="ow">or</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;configConfMo&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_config_conf_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;configResolveDn&quot;</span><span class="p">,</span> <span class="s">&quot;configResolveDns&quot;</span><span class="p">,</span>
                      <span class="s">&quot;configResolveClass&quot;</span><span class="p">,</span> <span class="s">&quot;configResolveClasses&quot;</span><span class="p">]:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_config_resolve_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;lsClone&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_single_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateTemplate&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_single_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;lsTemplatise&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_ls_templatise_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateNTemplate&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_multiple_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;lsInstantiateNNamedTemplate&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_multiple_clone_cmdlets</span><span class="p">(</span><span class="n">xml_string</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;statsClearInterval&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_clear_interval_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&quot;configConfRename&quot;</span><span class="p">:</span>
        <span class="n">cmdlet</span> <span class="o">=</span> <span class="n">_generate_config_conf_rename_cmdlet</span><span class="p">(</span><span class="n">xml_string</span><span class="p">)</span>
    <span class="c"># support for redirecting script output to respective file</span>
    <span class="k">if</span> <span class="n">_outfile_flag</span><span class="p">:</span>
        <span class="n">_outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">_outfile_path</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="s">&#39;##### Start-Of-PythonScript #####&#39;</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="n">cmdlet</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">_outfile</span><span class="p">,</span> <span class="s">&#39;##### End-Of-PythonScript #####&#39;</span>
        <span class="n">_outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;##### Start-Of-PythonScript #####&quot;</span>
        <span class="k">print</span> <span class="n">cmdlet</span>
        <span class="k">print</span> <span class="s">&quot;##### End-Of-PythonScript #####&quot;</span>
    <span class="k">return</span>


<span class="k">def</span> <span class="nf">_extract_xml</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which extracts xmlstring from the file stream and calls the</span>
<span class="sd">    _generate_cmdlets() on this xmlstring.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">read_flag</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">request_string</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="n">line_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
        <span class="c"># print request_string</span>
        <span class="k">if</span> <span class="n">read_flag</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;^\s*$&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
            <span class="n">request_string</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">line_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">_check_if_any_list_value_in_string</span><span class="p">(</span><span class="n">_multi_line_method</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
            <span class="n">request_string</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">read_flag</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">line_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">read_flag</span> <span class="ow">and</span> <span class="n">_check_if_any_list_value_in_string</span><span class="p">(</span>
                <span class="n">_single_line_method</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">line_count</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s">&#39;/&gt;&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">file_stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="k">continue</span>
            <span class="n">read_flag</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">_generate_cmdlets</span><span class="p">(</span><span class="n">request_string</span><span class="p">)</span>
            <span class="n">request_string</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
            <span class="k">break</span>

        <span class="n">line</span> <span class="o">=</span> <span class="n">file_stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_find_xml_requests_in_file</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="n">gui_log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which depending on gui_log flag, calls the _extract_xml()</span>
<span class="sd">    internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># print &quot;Inside _find_xml_requests_in_file_test&quot;</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">file_stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">gui_log</span><span class="p">:</span>
            <span class="n">_extract_xml</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s">&quot;[------------- Sending Request to Server ------------&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">file_stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># print &quot;[%s]&quot; %(line)</span>
                <span class="n">_extract_xml</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">file_stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_if_path_or_literal_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">literal_path</span><span class="p">,</span> <span class="n">gui_log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method which checks if path or literal_path present for the</span>
<span class="sd">    respective parameter set and if exists then</span>
<span class="sd">    call _find_xml_requests_in_file().</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">literal_path</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Parameter &lt;path&gt; takes precedence over &lt;literal_path&gt;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span>
    <span class="k">elif</span> <span class="n">literal_path</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">literal_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Please provide path or literal_path&quot;</span>
        <span class="k">return</span>

    <span class="n">file_stream</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">_find_xml_requests_in_file</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="n">gui_log</span><span class="p">)</span>
    <span class="n">file_stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_get_ucs_default_logpath_windows</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to find ucsm logs path on windows os.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s">&#39;APPDATA&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;APPDATA&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Not windows OS&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">getwindowsversion</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="c"># in case OS is Win 2008 or above</span>
        <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">(</span><span class="n">log_file_path</span><span class="p">),</span> <span class="s">&quot;LocalLow&quot;</span><span class="p">)</span>
    <span class="n">log_file_path</span> <span class="o">+=</span> <span class="s">r&quot;\Sun\Java\Deployment\log\.ucsm&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span>
    <span class="k">return</span> <span class="n">log_file_path</span>


<span class="k">def</span> <span class="nf">_get_ucs_default_logpath_linux</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to find ucsm logs path on linux os.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;HOME&#39;</span><span class="p">)</span>
    <span class="n">log_file_path</span> <span class="o">+=</span> <span class="s">r&quot;/.java/deployment/log/.ucsm/&quot;</span>
    <span class="k">return</span> <span class="n">log_file_path</span>


<span class="k">def</span> <span class="nf">_get_ucs_default_logpath_osx</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to find ucsm logs path on osx os.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;HOME&#39;</span><span class="p">)</span>
    <span class="c"># log_file_path += r&quot;/Library/Caches/Java/log/.ucsm&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">r&quot;/Library/Application Support/Oracle/Java/Deployment/log/.ucsm&quot;</span>
    <span class="n">log_file_path</span> <span class="o">+=</span> <span class="n">path</span>
    <span class="k">return</span> <span class="n">log_file_path</span>


<span class="k">def</span> <span class="nf">_get_ucs_default_logpath_cygwin</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal method to find ucsm logs path on cygwin os.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;APPDATA&#39;</span><span class="p">)</span>
    <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">log_file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="c"># TODO:</span>
    <span class="c"># if OSMajorVersion == 6:</span>
    <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">log_file_path</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/LocalLow&quot;</span>
    <span class="n">log_file_path</span> <span class="o">+=</span> <span class="s">r&quot;/Sun/Java/Deployment/log/.ucsm/&quot;</span>
    <span class="k">return</span> <span class="n">log_file_path</span>


<div class="viewcode-block" id="convert_to_ucs_python"><a class="viewcode-back" href="../../../ucsmsdk.utils.html#ucsmsdk.utils.converttopython.convert_to_ucs_python">[docs]</a><span class="k">def</span> <span class="nf">convert_to_ucs_python</span><span class="p">(</span><span class="n">log_path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xml</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">gui_log</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">literal_path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">dump_to_file</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">dump_file_path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">dump_xml</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This operation generates python script from ucsm gui using ucsm logs</span>
<span class="sd">    or directly from ucs logfile or xml request.</span>

<span class="sd">    Args:</span>
<span class="sd">        log_path (str): ucsm guilog path, if code unable to find the ucsm</span>
<span class="sd">              guilog path you can specify the path using this parameter.</span>
<span class="sd">        xml (bool): if True, generates python script using xml request.</span>
<span class="sd">        request (str): xml request</span>
<span class="sd">        gui_log (bool): if True, generates python script using ucsm logfile</span>
<span class="sd">        path (str): path of the file containing xml request or ucsm logfile</span>
<span class="sd">        literal_path (str): path of the file containing xml request or</span>
<span class="sd">              ucsm logfile</span>
<span class="sd">        dump_to_file (bool): if True, dump the code to file</span>
<span class="sd">        dump_file_path (str): path of file where to dump generated code.</span>
<span class="sd">        dump_xml (bool): if True, display the xml extracted for generating</span>
<span class="sd">              code</span>

<span class="sd">    Examples:</span>
<span class="sd">        * Optional in all param set - dump_to_file, dump_file_path, dump_xml</span>

<span class="sd">        * param set 1:</span>
<span class="sd">            convert_to_ucs_python()\n</span>
<span class="sd">            convert_to_ucs_python(dump_xml=True)\n</span>
<span class="sd">            file_path = r&quot;/home/user/pythoncode.py&quot;\n</span>
<span class="sd">            convert_to_ucs_python(dump_to_file=True,</span>
<span class="sd">                              dump_file_path=file_path,</span>
<span class="sd">                              dump_xml=True)\n</span>

<span class="sd">        * param set 2:</span>
<span class="sd">            xml_str=&#39;&#39;&#39;</span>
<span class="sd">             &lt;configConfRename</span>
<span class="sd">             dn=&quot;org-root/ls-ra1&quot;</span>
<span class="sd">             inNewName=&quot;ra2&quot;</span>
<span class="sd">             inHierarchical=&quot;false&quot;&gt;</span>
<span class="sd">             &lt;/configConfRename&gt;&#39;&#39;&#39;\n</span>
<span class="sd">            convert_to_ucs_python(xml=True, request=xml_str)\n</span>

<span class="sd">            file_path = &quot;\home\user\ucsmxml\configrequest.xml&quot;\n</span>
<span class="sd">            convert_to_ucs_python(xml=True, path=file_path)\n</span>

<span class="sd">        * param set 3:</span>
<span class="sd">            file_path = &quot;\home\user\ucsmlog\centrale_14804.log&quot;\n</span>
<span class="sd">            convert_to_ucs_python(gui_log=True, path=file_path)\n</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">print</span> <span class="s">&quot;### Please review the generated cmdlets before deployment.</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">global</span> <span class="n">_display_xml</span><span class="p">,</span> <span class="n">_outfile_flag</span><span class="p">,</span> <span class="n">_outfile_path</span><span class="p">,</span> <span class="n">_outfile</span>
    <span class="n">_display_xml</span> <span class="o">=</span> <span class="n">dump_xml</span>
    <span class="n">_outfile_flag</span> <span class="o">=</span> <span class="n">dump_to_file</span>
    <span class="n">_outfile_path</span> <span class="o">=</span> <span class="n">dump_file_path</span>

    <span class="k">if</span> <span class="n">_outfile_flag</span> <span class="ow">in</span> <span class="n">ucsgenutils</span><span class="o">.</span><span class="n">AFFIRMATIVE_LIST</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">_outfile_path</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;### Script Output is in file &lt; &quot;</span> <span class="o">+</span> <span class="n">_outfile_path</span> <span class="o">+</span> <span class="s">&quot; &gt;&quot;</span>
            <span class="n">_outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">_outfile_path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">_outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="c"># _outfile = open(r&quot;c:\work.txt&quot;, &#39;w+&#39;)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Provide dump_file_path&quot;</span>
            <span class="k">return</span>
    <span class="k">if</span> <span class="n">xml</span> <span class="ow">in</span> <span class="n">ucsgenutils</span><span class="o">.</span><span class="n">AFFIRMATIVE_LIST</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gui_log</span> <span class="ow">in</span> <span class="n">ucsgenutils</span><span class="o">.</span><span class="n">AFFIRMATIVE_LIST</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;parameter &lt;xml&gt; takes precedence over &lt;gui_log&gt;&quot;</span>
        <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
            <span class="n">_generate_cmdlets</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">literal_path</span><span class="p">:</span>
            <span class="n">_if_path_or_literal_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">literal_path</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Provide request&quot;</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="n">gui_log</span> <span class="ow">in</span> <span class="n">ucsgenutils</span><span class="o">.</span><span class="n">AFFIRMATIVE_LIST</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">literal_path</span><span class="p">:</span>
            <span class="n">_if_path_or_literal_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">literal_path</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Provide path or literal_path&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">log_path</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_path</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> does not exists.&quot;</span> <span class="o">%</span> <span class="n">log_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">log_path</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is not a directory.&quot;</span> <span class="o">%</span> <span class="n">log_path</span><span class="p">)</span>
            <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">log_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">platform</span> <span class="k">as</span> <span class="n">_platform</span>

            <span class="k">if</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;linux&quot;</span> <span class="ow">or</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;linux2&quot;</span><span class="p">:</span>
                <span class="c"># linux</span>
                <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">_get_ucs_default_logpath_linux</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;darwin&quot;</span><span class="p">:</span>
                <span class="c"># OS X</span>
                <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">_get_ucs_default_logpath_osx</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span> <span class="ow">or</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;win64&quot;</span><span class="p">:</span>
                <span class="c"># Windows...</span>
                <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">_get_ucs_default_logpath_windows</span><span class="p">()</span>
            <span class="k">elif</span> <span class="s">&quot;cygwin&quot;</span> <span class="ow">in</span> <span class="n">_platform</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="c"># Cygwin</span>
                <span class="n">log_file_path</span> <span class="o">=</span> <span class="n">_get_ucs_default_logpath_cygwin</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;[Error]: Unsupported OS:&quot;</span><span class="p">,</span> <span class="n">_platform</span>
                <span class="n">log_file_path</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">return</span>

        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">log_file_path</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file_</span> <span class="k">for</span> <span class="n">file_</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&quot;centrale_*.log&quot;</span><span class="p">)</span> <span class="k">if</span>
                 <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_</span><span class="p">)]</span>
        <span class="n">files</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">last_updated_file</span> <span class="o">=</span> <span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">print</span> <span class="s">&quot;ucsm logfile: </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">log_file_path</span><span class="p">,</span> <span class="n">last_updated_file</span><span class="p">))</span>

        <span class="n">file_stream</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">last_updated_file</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="c"># read the file till the end</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_stream</span><span class="p">:</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c"># Wait indefinitely until receive new line of set and then again wait</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c"># line = file_stream.readline()</span>
            <span class="c"># if line:</span>
            <span class="c">#     _find_xml_requests_in_file_test(file_stream, True)</span>
            <span class="n">_find_xml_requests_in_file</span><span class="p">(</span><span class="n">file_stream</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">file_stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="c"># if _outfile_path:</span>
        <span class="c"># _outfile.close()</span>

    <span class="k">print</span> <span class="s">&quot;### End of Convert-To-Python ###&quot;</span></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cisco.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>